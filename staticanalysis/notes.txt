

Table of Contents

1. About Me
-----------
Canoo, JetBrains
Groovy, CodeNarc
JSR Expert Group, Committer
Groovy in Action 2



2. Static Code Analysis
-----------------------
- What is code analysis: 
- IDEA analysis: "searches AST for bug patterns (on demand or on fly)"
- Examples + Quick Fixes
    - 1) SharedLock example from slides
    - 2) Field accessed in sync and non-sync context
    - 3) lock acquired & not properly unlocked 
    - 4) Suspicious Indentation of Control Statement
    - 5) Suspicious Variable/Parameter Name
    - http://hamletdarcy.blogspot.com/2008/04/10-best-idea-inspections-youre-not.html

- Advanced Capabilities
    - Suppressing False Positives
    - Writing your own using Search & Replace Structurally
    - Profiles & Batch Mode
    - Other languages (Android, Ant inspections, Application Server Inspections, CDI(Contexts and Dependency Injection)issues, CSS, Faces Model, FreeMarker inspections, Google App Engine, Google Web Toolkit,  Groovy, Guice Inspections, Hibernate Issues, HTML, J2ME, Java EE,  JavaScript, JSF, JSP,  JUnit, LESS, Maven, OSGi, RELAX NG, SCSS, Spring Model, Spring Web Services, SQL, TestNG, Velocity inspections, Java WebServices, Webflow Model, WSDL issues, XML, XPath, XSLT... and many more
    - Other options (findbugs, checkstyle, PMD, CodeNarc)
    - Command line & CI integration

- How it works
    - AST Slide
    - AST Visitor

3. JSR 305 and 308 Annotations
------------------------------
- @GuardedBy and @Immutable - GuardedByExample.java
    - Add jcp classes to classpath
    - non final GuardedBy field, not guarded correctly
    - non final field in @Immutable class

- @Nullable, NotNull - NullableExample.java
    - http://www.jetbrains.com/idea/documentation/howto.html
    - Add annotations to classpath
    - Can be associated with other annotations (like Hibernate's)
    - Infer Nullity - http://www.jetbrains.com/idea/webhelp/inferring-nullity.html
    - http://blogs.jetbrains.com/idea/2011/03/more-flexible-and-configurable-nullublenotnull-annotations/

- @Pattern - PatternExample.java
    - Enforces String against a regex

- @Language - LanguageExample.java
    - Syntax checks language snippets
    - http://www.jetbrains.com/idea/webhelp/using-language-injections.html

- @Nls, @NonNls, @PropertyKey 
    http://www.jetbrains.com/idea/webhelp/extracting-hard-coded-string-literals.html
    http://www.jetbrains.com/idea/webhelp/nonnls-annotation.html

4. Duplicate Detection
----------------------
    - http://www.jetbrains.com/idea/features/code_duplicate.html
    - Java, CSS, Ruby
    - Anonymizes Local Variables, Fields, Methods, Types, Literals
    - Weighted/Scored analysis

5. Stack Trace Analysis
-----------------------
    - Copy and paste stack traces from Log files into IDEA
    - http://blogs.jetbrains.com/idea/2006/08/analyzing-external-stack-traces/
    - Obfuscated code? ZKM Unscrambler available, and others as plugins (ProGuard)

6. Dataflow Analysis
--------------------



7. DSM? 
-------



2 Interfaces to Static Anal
    - on demand
    - on the fly


Slide 4
    - What is this a screenshot from? 
    - Screenshot from MPS

Slide 6
    - command line: need a valid .idea / .ipr file
    - http://www.jetbrains.com/idea/webhelp/running-inspections-offline.html
    - inspect.bat or inspect.sh in idea/bin
    - CI Integration: TeamCity has inspections built in

Slide 7
    - Concurrency is hard to unit test b/c of non-determinism
    - Concurrency is well supported in inspections

Slide 8 
    - WebStorm should get a mention
    - Are there Flex inspections? 

Slide 9
    - CheckStyle    
    - These all have plugins for IDEA

Slide 10 
    - How to write an inspection
    - How does Structural Search and Replace factor into static analysis? 
    "Structural Search Inspection"

Slide 11
    - @Nls, @NonNls - I18n annotations
    - @PropertyKey - ???

Slide 15 
    - Copy and Paste threaddump from CI server

Slide 16 
    - "Scan for null values" - how does this get null? 

Slide 18 - DSM 
    - Find screencast
    http://blogs.jetbrains.com/idea/2008/01/intellij-idea-dependency-analysis-with-dsm/
    http://www.canoo.com/blog/2011/01/09/intellij-idea-series-vi/
    http://tv.jetbrains.net/videocontent/vaclav-pech-at-geecon-2010-session-getem-before-they-get-you





