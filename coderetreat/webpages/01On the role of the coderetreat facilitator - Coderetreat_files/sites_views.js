var JSON;if(!JSON)JSON={};
(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=
/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,
mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function")value=value.toJSON(key);if(typeof rep==="function")value=rep.call(holder,key,value);switch(typeof value){case "string":return quote(value);case "number":return isFinite(value)?String(value):"null";case "boolean":case "null":return String(value);case "object":if(!value)return"null";gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=
1)partial[i]=str(i,value)||"null";v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1)if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}}else for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+
gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function")JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number")for(i=0;i<space;i+=1)indent+=" ";else if(typeof space==="string")indent=space;rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number"))throw new Error("JSON.stringify");return str("",{"":value})};if(typeof JSON.parse!=="function")JSON.parse=
function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object")for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined)value[k]=v;else delete value[k]}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse");}})();
(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=
ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){return new wrapper(obj)};if(typeof module!=="undefined"&&module.exports){module.exports=_;_._=_}else root._=_;_.VERSION="1.1.6";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(_.isNumber(obj.length))for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,
obj[i],i,obj)===breaker)return}else for(var key in obj)if(hasOwnProperty.call(obj,key))if(iterator.call(context,obj[key],key,obj)===breaker)return};_.map=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)});return results};_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=memo!==void 0;
if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial&&index===0){memo=value;initial=true}else memo=iterator.call(context,memo,value,index,list)});if(!initial)throw new TypeError("Reduce of empty array with no initial value");return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){if(obj==null)obj=[];if(nativeReduceRight&&
obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return memo!==void 0?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var reversed=(_.isArray(obj)?obj.slice():_.toArray(obj)).reverse();return _.reduce(reversed,iterator,memo,context)};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,iterator,context){var results=
[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value});return results};_.reject=function(obj,iterator,context){var results=[];if(obj==null)return results;each(obj,function(value,index,list){if(!iterator.call(context,value,index,list))results[results.length]=value});return results};_.every=_.all=function(obj,iterator,context){var result=
true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker});return result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result=iterator.call(context,
value,index,list))return breaker});return result};_.include=_.contains=function(obj,target){var found=false;if(obj==null)return found;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;any(obj,function(value){if(found=value===target)return true});return found};_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(method.call?method||value:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})};
_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.max.apply(Math,obj);var result={computed:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})});return result.value};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.min.apply(Math,obj);var result={computed:Infinity};each(obj,function(value,index,list){var computed=
iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})});return result.value};_.sortBy=function(obj,iterator,context){return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0}),"value")};_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);var low=0,high=array.length;
while(low<high){var mid=low+high>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid}return low};_.toArray=function(iterable){if(!iterable)return[];if(iterable.toArray)return iterable.toArray();if(_.isArray(iterable))return iterable;if(_.isArguments(iterable))return slice.call(iterable);return _.values(iterable)};_.size=function(obj){return _.toArray(obj).length};_.first=_.head=function(array,n,guard){return n!=null&&!guard?slice.call(array,0,n):array[0]};_.rest=_.tail=function(array,index,guard){return slice.call(array,
index==null||guard?1:index)};_.last=function(array){return array[array.length-1]};_.compact=function(array){return _.filter(array,function(value){return!!value})};_.flatten=function(array){return _.reduce(array,function(memo,value){if(_.isArray(value))return memo.concat(_.flatten(value));memo[memo.length]=value;return memo},[])};_.without=function(array){var values=slice.call(arguments,1);return _.filter(array,function(value){return!_.include(values,value)})};_.uniq=_.unique=function(array,isSorted){return _.reduce(array,
function(memo,el,i){if(0==i||(isSorted===true?_.last(memo)!=el:!_.include(memo,el)))memo[memo.length]=el;return memo},[])};_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,"length"));var results=new Array(length);for(var i=0;i<length;i++)results[i]=_.pluck(args,""+i);return results};_.indexOf=
function(array,item,isSorted){if(array==null)return-1;var i,l;if(isSorted){i=_.sortedIndex(array,item);return array[i]===item?i:-1}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;i<l;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item){if(array==null)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);var i=array.length;while(i--)if(array[i]===item)return i;return-1};_.range=function(start,
stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step}return range};_.bind=function(func,obj){if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));var args=slice.call(arguments,2);return function(){return func.apply(obj,args.concat(slice.call(arguments)))}};_.bindAll=function(obj){var funcs=slice.call(arguments,
1);if(funcs.length==0)funcs=_.functions(obj);each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return hasOwnProperty.call(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(func,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,
1)))};var limit=function(func,wait,debounce){var timeout;return function(){var context=this,args=arguments;var throttler=function(){timeout=null;func.apply(context,args)};if(debounce)clearTimeout(timeout);if(debounce||!timeout)timeout=setTimeout(throttler,wait)}};_.throttle=function(func,wait){return limit(func,wait,false)};_.debounce=function(func,wait){return limit(func,wait,true)};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;return memo=func.apply(this,
arguments)}};_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments));return wrapper.apply(this,args)}};_.compose=function(){var funcs=slice.call(arguments);return function(){var args=slice.call(arguments);for(var i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}};_.after=function(times,func){return function(){if(--times<1)return func.apply(this,arguments)}};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");
var keys=[];for(var key in obj)if(hasOwnProperty.call(obj,key))keys[keys.length]=key;return keys};_.values=function(obj){return _.map(obj,_.identity)};_.functions=_.methods=function(obj){return _.filter(_.keys(obj),function(key){return _.isFunction(obj[key])}).sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source)if(source[prop]!==void 0)obj[prop]=source[prop]});return obj};_.defaults=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source)if(obj[prop]==
null)obj[prop]=source[prop]});return obj};_.clone=function(obj){return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};_.isEqual=function(a,b){if(a===b)return true;var atype=typeof a,btype=typeof b;if(atype!=btype)return false;if(a==b)return true;if(!a&&b||a&&!b)return false;if(a._chain)a=a._wrapped;if(b._chain)b=b._wrapped;if(a.isEqual)return a.isEqual(b);if(_.isDate(a)&&_.isDate(b))return a.getTime()===b.getTime();if(_.isNaN(a)&&_.isNaN(b))return false;
if(_.isRegExp(a)&&_.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(atype!=="object")return false;if(a.length&&a.length!==b.length)return false;var aKeys=_.keys(a),bKeys=_.keys(b);if(aKeys.length!=bKeys.length)return false;for(var key in a)if(!(key in b)||!_.isEqual(a[key],b[key]))return false;return true};_.isEmpty=function(obj){if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(hasOwnProperty.call(obj,
key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType==1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==="[object Array]"};_.isArguments=function(obj){return!!(obj&&hasOwnProperty.call(obj,"callee"))};_.isFunction=function(obj){return!!(obj&&obj.constructor&&obj.call&&obj.apply)};_.isString=function(obj){return!!(obj===""||obj&&obj.charCodeAt&&obj.substr)};_.isNumber=function(obj){return!!(obj===0||obj&&obj.toExponential&&obj.toFixed)};_.isNaN=function(obj){return obj!==
obj};_.isBoolean=function(obj){return obj===true||obj===false};_.isDate=function(obj){return!!(obj&&obj.getTimezoneOffset&&obj.setUTCFullYear)};_.isRegExp=function(obj){return!!(obj&&obj.test&&obj.exec&&(obj.ignoreCase||obj.ignoreCase===false))};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.times=function(n,iterator,context){for(var i=0;i<n;i++)iterator.call(context,
i)};_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name])})};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};_.template=function(str,data){var c=_.templateSettings;var tmpl="var __p=[],print=function(){__p.push.apply(__p,arguments);};"+"with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(match,
code){return"',"+code.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(match,code){return"');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var func=new Function("obj",tmpl);return data?func(data):func};var wrapper=function(obj){this._wrapped=obj};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj};var addToWrapper=function(name,func){wrapper.prototype[name]=
function(){var args=slice.call(arguments);unshift.call(args,this._wrapped);return result(func.apply(_,args),this._chain)}};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){method.apply(this._wrapped,arguments);return result(this._wrapped,this._chain)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,
arguments),this._chain)}});wrapper.prototype.chain=function(){this._chain=true;return this};wrapper.prototype.value=function(){return this._wrapped}})();var Haml;
(function(){var matchers,self_close_tags,embedder,forceXML,escaperName,escapeHtmlByDefault;function trim(text){return text.replace(/^\s+|\s+$/g,"")}function html_escape(text){return(text+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")}function render_attribs(attribs){var key,value,result=[];for(key in attribs)if(key!=="_content"&&attribs.hasOwnProperty(key))switch(attribs[key]){case "undefined":case "false":case "null":case '""':break;default:try{value=
JSON.parse("["+attribs[key]+"]")[0];if(value===true)value=key;else if(typeof value==="string"&&embedder.test(value))value='" +\n'+parse_interpol(html_escape(value))+' +\n"';else value=html_escape(value);result.push(" "+key+'=\\"'+value+'\\"')}catch(e){result.push(" "+key+'=\\"" + '+escaperName+"("+attribs[key]+') + "\\"')}}return result.join("")}function parse_attribs(line){var attributes={},l=line.length,i,c,count=1,quote=false,skip=false,open,close,joiner,seperator,pair={start:1,middle:null,end:null};
if(!(l>0&&(line.charAt(0)==="{"||line.charAt(0)==="(")))return{_content:line[0]===" "?line.substr(1,l):line};open=line.charAt(0);close=open==="{"?"}":")";joiner=open==="{"?":":"=";seperator=open==="{"?",":" ";function process_pair(){if(typeof pair.start==="number"&&typeof pair.middle==="number"&&typeof pair.end==="number"){var key=trim(line.substr(pair.start,pair.middle-pair.start)),value=trim(line.substr(pair.middle+1,pair.end-pair.middle-1));attributes[key]=value}pair={start:null,middle:null,end:null}}
for(i=1;count>0;i+=1){if(i>l)throw"Malformed attribute block";c=line.charAt(i);if(skip)skip=false;else if(quote){if(c==="\\")skip=true;if(c===quote)quote=false}else{if(c==='"'||c==="'")quote=c;if(count===1){if(c===joiner)pair.middle=i;if(c===seperator||c===close){pair.end=i;process_pair();if(c===seperator)pair.start=i+1}}if(c===open||c==="(")count+=1;if(c===close||count>1&&c===")")count-=1}}attributes._content=line.substr(i,line.length);return attributes}function parse_interpol(value){var items=[],
pos=0,next=0,match;while(true){next=value.substr(pos).search(embedder);if(next<0){if(pos<value.length)items.push(JSON.stringify(value.substr(pos)));break}items.push(JSON.stringify(value.substr(pos,next)));pos+=next;match=value.substr(pos).match(embedder);next=match[0].length;if(next<0)break;if(match[1]==="#")items.push(escaperName+"("+(match[2]||match[3])+")");else items.push(match[2]||match[3]);pos+=next}return _.filter(items,function(part){return part&&part.length>0}).join(" +\n")}embedder=/([#!])\{([^}]*)\}/;
self_close_tags=["meta","img","link","br","hr","input","area","base"];matchers=[{name:"html tags",regexp:/^(\s*)((?:[.#%][a-z_\-][a-z0-9_:\-]*)+)(.*)$/i,process:function(){var line_beginning,tag,classes,ids,attribs,content,whitespaceSpecifier,whitespace={},output;line_beginning=this.matches[2];classes=line_beginning.match(/\.([a-z_\-][a-z0-9_\-]*)/gi);ids=line_beginning.match(/\#([a-z_\-][a-z0-9_\-]*)/gi);tag=line_beginning.match(/\%([a-z_\-][a-z0-9_:\-]*)/gi);tag=tag?tag[0].substr(1,tag[0].length):
"div";attribs=this.matches[3];if(attribs){attribs=parse_attribs(attribs);if(attribs._content){var leader0=attribs._content.charAt(0),leader1=attribs._content.charAt(1),leaderLength=0;if(leader0=="<"){leaderLength++;whitespace.inside=true;if(leader1==">"){leaderLength++;whitespace.around=true}}else if(leader0==">"){leaderLength++;whitespace.around=true;if(leader1=="<"){leaderLength++;whitespace.inside=true}}attribs._content=attribs._content.substr(leaderLength);this.contents.unshift(trim(attribs._content));
delete attribs._content}}else attribs={};if(classes){classes=_.map(classes,function(klass){return klass.substr(1,klass.length)}).join(" ");if(attribs["class"])try{attribs["class"]=JSON.stringify(classes+" "+JSON.parse(attribs["class"]))}catch(e){attribs["class"]=JSON.stringify(classes+" ")+" + "+attribs["class"]}else attribs["class"]=JSON.stringify(classes)}if(ids){ids=_.map(ids,function(id){return id.substr(1,id.length)}).join(" ");if(attribs.id)attribs.id=JSON.stringify(ids+" ")+attribs.id;else attribs.id=
JSON.stringify(ids)}attribs=render_attribs(attribs);content=this.render_contents();if(content==='""')content="";if(whitespace.inside)if(content.length==0)content='"  "';else try{content='" '+JSON.parse(content)+' "'}catch(e){content='" "+\n'+content+'+\n" "'}if(forceXML?content.length>0:_.indexOf(self_close_tags,tag)==-1)output='"<'+tag+attribs+'>"'+(content.length>0?" + \n"+content:"")+' + \n"</'+tag+'>"';else output='"<'+tag+attribs+' />"';if(whitespace.around)output='" '+output.substr(1,output.length-
2)+' "';return output}},{name:"each loop",regexp:/^(\s*)(?::for|:each)\s+(?:([a-z_][a-z_\-]*),\s*)?([a-z_][a-z_\-]*)\s+in\s+(.*)(\s*)$/i,process:function(){var ivar=this.matches[2]||"__key__",vvar=this.matches[3],avar=this.matches[4],rvar="__result__";if(this.matches[5])this.contents.unshift(this.matches[5]);return"(function () { "+"var "+rvar+" = [], "+ivar+", "+vvar+"; "+"for ("+ivar+" in "+avar+") { "+"if ("+avar+".hasOwnProperty("+ivar+")) { "+vvar+" = "+avar+"["+ivar+"]; "+rvar+".push(\n"+(this.render_contents()||
"''")+"\n); "+"} } return "+rvar+'.join(""); }).call(this)'}},{name:"if",regexp:/^(\s*):if\s+(.*)\s*$/i,process:function(){var condition=this.matches[2];return"(function () { "+"if ("+condition+") { "+"return (\n"+(this.render_contents()||"")+"\n);"+'} else { return ""; } }).call(this)'}},{name:"silent-comments",regexp:/^(\s*)-#\s*(.*)\s*$/i,process:function(){return'""'}},{name:"silent-comments",regexp:/^(\s*)\/\s*(.*)\s*$/i,process:function(){this.contents.unshift(this.matches[2]);return'"<!--'+
this.contents.join("\\n")+'--\>"'}},{name:"raw",regexp:/^(\s*)-\s*(.*)\s*$/i,process:function(){this.contents.unshift(this.matches[2]);return'"";'+this.contents.join("\n")+"; _$output = _$output "}},{name:"doctype",regexp:/^()!!!(?:\s*(.*))\s*$/,process:function(){var line="";switch((this.matches[2]||"").toLowerCase()){case "":line='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">';break;case "strict":case "1.0":line='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">';
break;case "frameset":line='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">';break;case "5":line="<!DOCTYPE html>";break;case "1.1":line='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">';break;case "basic":line='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">';break;case "mobile":line='<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">';
break;case "xml":line="<?xml version='1.0' encoding='utf-8' ?>";break;case "xml iso-8859-1":line="<?xml version='1.0' encoding='iso-8859-1' ?>";break}return JSON.stringify(line+"\n")}},{name:"markdown",regexp:/^(\s*):markdown\s*$/i,process:function(){return parse_interpol(exports.Markdown.encode(this.contents.join("\n")))}},{name:"script",regexp:/^(\s*):(?:java)?script\s*$/,process:function(){return parse_interpol('\n<script type="text/javascript">\n'+"//<![CDATA[\n"+this.contents.join("\n")+"\n//]]\>\n<\/script>\n")}},
{name:"css",regexp:/^(\s*):css\s*$/,process:function(){return JSON.stringify('<style type="text/css">\n'+this.contents.join("\n")+"\n</style>")}}];function compile(lines){var block=false,output=[];if(typeof lines==="string")lines=trim(lines).replace(/\n\r|\r/g,"\n").split("\n");_.each(lines,function(line){var match,found=false;if(block){match=block.check_indent.exec(line);if(match){block.contents.push(match[1]||"");return}else{output.push(block.process());block=false}}_.each(matchers,function(matcher){if(!found){match=
matcher.regexp.exec(line);if(match){block={contents:[],indent_level:match[1],matches:match,check_indent:new RegExp("^(?:\\s*|"+match[1]+"  (.*))$"),process:matcher.process,render_contents:function(){return compile(this.contents)}};found=true}}});if(!found)output.push(function(){if(line[0]==="\\")return parse_interpol(line.substr(1,line.length));function escapedLine(){try{return escaperName+"("+JSON.stringify(JSON.parse(line))+")"}catch(e2){return escaperName+"("+line+")"}}function unescapedLine(){try{return parse_interpol(JSON.parse(line))}catch(e){return line}}
if(line.substr(0,2)==="&="){line=trim(line.substr(2,line.length));return escapedLine()}if(line.substr(0,2)==="!="){line=trim(line.substr(2,line.length));return unescapedLine()}if(line[0]==="="){line=trim(line.substr(1,line.length));if(escapeHtmlByDefault)return escapedLine();else return unescapedLine()}return parse_interpol(line)}())});if(block)output.push(block.process());var txt=_.filter(output,function(part){return part&&part.length>0}).join(" +\n");if(txt.length==0)txt='""';return txt}function optimize(js){var new_js=
[],buffer=[],part,end;function flush(){if(buffer.length>0){new_js.push(JSON.stringify(buffer.join(""))+end);buffer=[]}}_.each(js.replace(/\n\r|\r/g,"\n").split("\n"),function(line){part=line.match(/^(\".*\")(\s*\+\s*)?$/);if(!part){flush();new_js.push(line);return}end=part[2]||"";part=part[1];try{buffer.push(JSON.parse(part))}catch(e){flush();new_js.push(line)}});flush();return new_js.join("\n")}function render(text,options){options=options||{};text=text||"";var js=compile(text,options);if(options.optimize)js=
Haml.optimize(js);return execute(js,options.context||Haml,options.locals)}function execute(js,self,locals){return function(){with(locals||{})try{var _$output;eval("("+js+")");return _$output}catch(e){return"\n<pre class='error'>"+html_escape(e.stack)+"</pre>\n"}}.call(self)}Haml=function(haml,config){if(typeof config!="object"){forceXML=config;config={}}var escaper;if(config.customEscape){escaper="";escaperName=config.customEscape}else{escaper=html_escape.toString()+"\n";escaperName="html_escape"}escapeHtmlByDefault=
config.escapeHtmlByDefault||config.escapeHTML||config.escape_html;var js=optimize(compile(haml));var str="with(locals || {}) {\n"+"  try {\n"+"   var _$output="+js+";\n return _$output;"+"  } catch (e) {\n"+"    return \"\\n<pre class='error'>\" + "+escaperName+'(e.stack) + "</pre>\\n";\n'+"  }\n"+"}";return new Function("locals",escaper+str)};Haml.compile=compile;Haml.optimize=optimize;Haml.render=render;Haml.execute=execute;Haml.html_escape=html_escape})();
if(typeof module!=="undefined")module.exports=Haml;
(function(){window.JST=window.JST||{};window.JST["posterous_bar"]=Haml('.pbar_inner\n  %header.test\n    %ul{class: (Posterous.currentUser ? "pbar_logged_in" : "pbar_logged_out")}\n      - if (!Posterous.currentUser) {\n      %li.pbar_first\n        %a.pbar_join{href: "http://#{POSTEROUS_HOSTNAME}/register?jumpto=#{escape(window.location.href)}"} \n          %span Join \n      - } else if (!site.isAuthor()) {\n      %li.pbar_first\n        %a.pbar_reader{href: "http://#{POSTEROUS_HOSTNAME}/"} Reader\n      - }\n      - if (site.isAuthor()) {\n      %li.pbar_first\n        %a.pbar_post{href: "http://#{POSTEROUS_HOSTNAME}/posts/new/#{site.get(\'id\')}"} Post\n      - }\n      - if (!site.isMember()) {\n      %li\n        %a.pbar_login_form{href: \'#\'} Follow\n      - } else if (site.isMember() && !site.isAdmin()) {\n      %li.pbar_first\n        %a.pbar_unfollow{href: \'#\'} Unfollow\n      - }\n      - if (site.isAdmin()) {\n      %li\n        %a.pbar_manage{href: "http://#{POSTEROUS_HOSTNAME}/#spaces/#{site.get(\'hostname\')}/posts/edit"} Manage \n      - }\n      %li.pbar_last\n        %a.pbar_menu{href: "#", title: "Menu"} \n          %span Menu\n  .pbar_main\n    .pbar_body\n    %footer\n      %a.pbar_close{href: "#"} Close\n      - if (Posterous.currentUser) {\n      %a.pbar_user_action.pbar_logout{href: "http://#{POSTEROUS_HOSTNAME}/logout?jumpto=#{escape(window.location.href)}"} Log Out\n      - } else {\n      %a.pbar_user_action.pbar_login{href: "http://#{POSTEROUS_HOSTNAME}/login?jumpto=#{escape(window.location.href)}"} Log In\n      - }\n      %a.pbar_user_action.pbar_forgot{href: "http://#{POSTEROUS_HOSTNAME}/forgot_password"} Forgot Password?');window.JST["posterous_bar_login_form"]=
Haml('.pbar_menu_wrap\n  %h1 Sign Up or Log In to follow\n  .pbar_toggle\n    .pbar_active_track\n    %ul\n      %li\n        %a.sign_up{href: "#"} Sign Up\n      %li\n        %a.log_in{href: "#"} Log In\n%form.log_in_form.cf{action: "https://#{POSTEROUS_HOSTNAME}/login", method: "post"}\n  %input{type: "hidden", name: "jumpto", value: window.location.href}\n  %input{type: "hidden", name: "follow", value: site.get("id")}\n  %input{type: "hidden", name: "authenticity_token", value: window._token}\n  .auto_fade_input\n    %label{for: "pbar_login_email"} Email\n    %input{type: "email", name: "email", id: "pbar_login_email", autocorrect: "off", autocapitalize: "off", tabindex: "4"}\n  %button{type: "submit", tabindex: "6"}\n    %span Go\n  .auto_fade_input.password\n    %label{for: "pbar_login_password"} Password\n    %input{type: "password", name: "password", id: "pbar_login_password", tabindex: "5"}\n%form.sign_up_form.cf{action: "https://#{POSTEROUS_HOSTNAME}/register", autocomplete: "off", method: "post"}\n  %input{type: "hidden", name: "jumpto", value: window.location.href}\n  %input{type: "hidden", name: "follow", value: site.get("id")}\n  %input{type: "hidden", name: "authenticity_token", value: window._token}\n  .auto_fade_input.email\n    %label{for: "pbar_user_email"} Email\n    %input{type: "text", name: "user_email", id: "pbar_user_email"}\n  .auto_fade_input\n    %label{for: "pbar_user_toast"} Email\n    %input{type: "email", name: "toast", id: "pbar_user_toast", autocorrect: "off", autocapitalize: "off", tabindex: "1"}\n  %button{type: "submit", tabindex: "3"}\n    %span Go\n  .auto_fade_input.password\n    %label{for: "pbar_user_password"} Password\n    %input{type: "password", name: "user_passwd", id: "pbar_user_password", tabindex: "2"}');
window.JST["posterous_bar_menu"]=Haml('.pbar_menu_wrap\n  - if (!Posterous.currentUser) {\n  .pbar_intro\n    %h1 \n      %strong #{site.get("name")}&nbsp;\n      is made with:\n    %a.pbar_spaces_logo{href: "http://#{POSTEROUS_HOSTNAME}", title: "Posterous Spaces"} Posterous Spaces\n  - } else {\n  %h1 Hi, <strong>#{Posterous.currentUser.get("firstname") || Posterous.currentUser.get("nickname")}</strong>\n  - }\n  %ul.pbar_link_list\n    - if (Posterous.currentUser) {\n    %li.cf\n      %a.pbar_view_spaces{href: "http://#{POSTEROUS_HOSTNAME}/#spaces"} \n        .pbar_icon\n        .pbar_text View Your Spaces\n    - if (!site.isAuthor()) {\n    %li.cf\n      %a.pbar_open_reader{href: "http://#{POSTEROUS_HOSTNAME}/"}\n        .pbar_icon \n        .pbar_text Open Reader\n    - }\n    - }\n    %li.cf\n      %a.pbar_slideshow{href: "#!/slideshow"}\n        .pbar_icon\n        .pbar_text Play Slideshow');
window.JST["posterous_bar_notification"]=Haml(".pbar_menu_wrap\n  .pbar_intro\n    %h1= message\n  %ul.pbar_link_list\n    :if links != undefined\n      :each link in links\n        %li.cf\n          %a{class: link.htmlClass, href: link.href}\n            .pbar_icon\n            .pbar_text= link.text");window.JST["posterous_bar_warning"]=Haml('.pbar_menu_wrap\n  .pbar_intro\n    %h1= message\n  %ul.pbar_button_list.cf\n    :each button in buttons\n      %li.cf\n        %a{class: "pbar_confirmation_button #{button.htmlClass}", href: button.href}\n          %span= button.text')})();
